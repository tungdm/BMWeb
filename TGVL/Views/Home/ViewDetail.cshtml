@model TGVL.Models.SearchResultViewModel

@{
    ViewBag.Title = "ViewDetail";
    Layout = "~/Views/Shared/TestLayout.cshtml";
}

@Styles.Render("~/Content/searchproductcss")

<style>
    .item-img-info {
        width: 300px;
        height: 200px;
        background-image: none;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: cover;
    }

    .item-inner {
        width: 300px;
        height: 300px;
        display: inline-block;
        vertical-align: top;
    }

    .col-item {
        width: 100%;
        height: auto;
    }

    span.stars, span.stars span {
        display: block;
        background: url("/Images/stars.png") 0 -16px repeat-x;
        width: 80px;
        height: 16px;
    }

        span.stars span {
            background-position: 0 0;
        }
</style>

<section class="main-container">
    <div class="main container">
        <div class="breadcrumbs">
            <div class="container">
                <div class="row">
                    <ul>
                        <li class="home"><strong> Trang chủ </strong><span>&raquo;</span></li>
                        <li class=""> <strong>@Model.SysProduct.SysCategory.Name</strong><span>&raquo;</span></li>
                        <li class="category13"><strong> @Model.SysProduct.Name </strong></li>
                    </ul>
                </div>
            </div>
        </div>
        <br />
        <div class="col-main">
            <div class="row">
                <div class="col-md-12">
                    <div class="product-view">
                        <div class="product-essential">
                            <div class="product-img-box col-sm-3 col-xs-12">
                                <div class="product-image">
                                    <div>
                                        @*<div class="large-image"><img alt="product-image" src="~/Content/images/cement-fico-pcb-40.jpg"></div>*@
                                        <img src="~/Images/Product/SysProduct/@Model.SysProduct.Image" width="100" height="100" />
                                    </div>
                                </div>
                                <div class="clear"></div>
                            </div>
                            <div class="product-shop col-sm-9 col-xs-12">
                                <div class="product-name">
                                    <h1>@Model.SysProduct.Name</h1>
                                </div>

                                <div class="short-description">
                                    Gạch với chất lượng tốt nhất Việt Nam
                                    
                                </div>
                                <hr />
                                <div class="price-block">
                                    <div class="price-box">
                                        Có <span class="total"> @Model.NumOfShops </span> cửa hàng bán với giá từ: <p class="special-price"> <span class="price-label"> Special Price</span> <span class="price">@string.Format("{0:C0}", Model.SysProduct.UnitPrice)</span> </p>
                                    </div>
                                </div>
                                <div class="toggle-content">
                                    <div class="table-responsive">
                                        <table class="data-table col-md-4">
                                            <thead>
                                                <tr>THÔNG SỐ SẢN PHẨM</tr>
                                            </thead>
                                            @foreach (var item in Model.SysProduct.ProductAttributes)
                                            {
                                                <tr>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Attribute)
                                                    </td>
                                                    <td>
                                                        @Html.DisplayFor(modelItem => item.Value)
                                                    </td>
                                                </tr>
                                            }
                                        </table>
                                    </div>
                                </div>
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>
            <br />
            

            <div class="row">
                <div class="col-md-12">
                    <div class="nav-tabs-custom">
                        <ul class="nav nav-tabs">
                            <li class="active"><a href="#tab_1" data-toggle="tab">THÔNG TIN CHI TIẾT</a></li>
                            <li><a href="#tab_2" data-toggle="tab">CỬA HÀNG ĐỀ XUẤT</a></li>
                            <li><a href="#tab_3" id="recomendation" data-toggle="tab">BẢN ĐỒ</a></li>
                        </ul>
                        <div class="tab-content">
                            <div class="tab-pane active" id="tab_1">
                                @Html.Raw(Model.SysProduct.Description)
                            </div>

                            <div class="tab-pane" id="tab_2">
                                <div class="table-responsive">
                                    <table class="data-table">
                                        <thead>
                                            <tr>
                                                <th>STT</th>
                                                <th>Cửa hàng</th>
                                                <th>Giá</th>
                                                <th>Đánh giá</th>
                                                <th>Địa chỉ</th>
                                                <th>&nbsp;</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @{int count = 0; }
                                            @foreach (var item in Model.ListShops)
                                            {
                                                count++;
                                                <tr>
                                                    <td>@count</td>
                                                    <td>@item.name</td>
                                                    <td>@Html.DisplayFor(modelItem => item.price)</td>
                                                    <td>
                                                        <span style="float: left;" class="stars">@item.rating</span> (@item.rating)
                                                    </td>
                                                    <td>@item.address</td>
                                                    <td>
                                                        <button type="submit" class="btn btn-primary" onclick="viewOnMap(@item.lat, @item.lng)">Xem bản đồ</button>
                                                        <button type="submit" class="btn btn-success" onclick="datmua(@item.productId)">Thêm vào giỏ hàng</button>
                                                    </td>
                                                </tr>
                                            }
                                            
                                            
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            <div class="tab-pane" id="tab_3">
                                <div class="bh-sl-container container-fluid">
                                    <div id="bh-sl-map-container" class="bh-sl-map-container">
                                        <div class="row">
                                            <div id="map-results-container" class="container">

                                                <div class="bh-sl-loc-list col-md-3">
                                                    <ul class="list list-unstyled"></ul>
                                                </div>
                                                <div id="bh-sl-map" class="bh-sl-map col-md-9"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
            <br />
            <section class="main-container col1-layout home-content-container">
                <div class="container">
                    <div class="row">
                        <div class="std">
                            <div id="border1" class="best-pro col-md-12">
                                <div class="slider-items-products">
                                    <div class="new_title center">
                                        <h2>SẢN PHẨM TƯƠNG TỰ</h2>
                                    </div>
                                    <div id="best-seller-slider" class="product-flexslider hidden-buttons">
                                        <div class="slider-items slider-width-col4">
                                            <div class="item">
                                                <div class="col-item">
                                                    <div class="item-inner">
                                                        <div class="item-img">
                                                            <div class="item-img-info">
                                                                <a href="product_detail.html" class="product-image"> <img src="~/Content/images/xi-mang-fico-pcb40.jpg"> </a>
                                                            </div>
                                                        </div>
                                                        <div class="item-info">
                                                            <div class="info-inner">
                                                                <div class="item-title"> <a href="product_detail.html" title="Thép cây vằn Pomina D12"> Thép cây vằn Pomina D12 </a> </div>
                                                                <div class="item-content">

                                                                    <div class="item-price">
                                                                        <div class="price-box">

                                                                            <span class="regular-price"> <span class="price">145.000 VNĐ</span> </span>

                                                                        </div>
                                                                    </div>

                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="item">
                                                <div class="col-item">
                                                    <div class="item-inner">
                                                        <div class="item-img">
                                                            <div class="item-img-info">
                                                                <a href="product_detail.html" title="Xi măng Hà Tiên 1" class="product-image"> <img src="~/Content/images/xi-mang-ha-tien-1-pcb-30.jpg"></a>

                                                            </div>
                                                        </div>
                                                        <div class="item-info">
                                                            <div class="info-inner">
                                                                <div class="item-title"> <a href="grid.html" title="Xi măng Hà Tiên 1"> Xi măng Hà Tiên 1 </a> </div>
                                                                <div class="item-content">

                                                                    <div class="item-price">
                                                                        <div class="price-box">
                                                                            <span class="regular-price"> <span class="price">89.000 VNĐ</span> </span>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="item">
                                                <div class="col-item">
                                                    <div class="sale-label sale-top-right">HOT</div>
                                                    <div class="item-inner">
                                                        <div class="item-img">
                                                            <div class="item-img-info">
                                                                <a href="product_detail.html" title="Gạch bông" class="product-image"> <img src="~/Content/images/gachbong.jpg" alt="Sample Product"></a>

                                                            </div>
                                                        </div>
                                                        <div class="item-info">
                                                            <div class="info-inner">
                                                                <div class="item-title"> <a href="grid.html" title="Gạch bông"> Gạch bông </a> </div>
                                                                <div class="item-content">

                                                                    <div class="item-price">
                                                                        <div class="price-box">
                                                                            <span class="regular-price"> <span class="price">90.000 VNĐ</span> </span>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                    <strong></strong>
                                                </div>
                                            </div>

                                            <div class="item">
                                                <div class="col-item">
                                                    <div class="item-inner">
                                                        <div class="item-img">
                                                            <div class="item-img-info">
                                                                <a href="product_detail.html" title="Xi măng Hà Tiên 1" class="product-image"> <img src="~/Content/images/xi-mang-ha-tien-1-pcb-30.jpg"></a>

                                                            </div>
                                                        </div>
                                                        <div class="item-info">
                                                            <div class="info-inner">
                                                                <div class="item-title"> <a href="grid.html" title="Xi măng Hà Tiên 1"> Xi măng Hà Tiên 1 </a> </div>
                                                                <div class="item-content">

                                                                    <div class="item-price">
                                                                        <div class="price-box">
                                                                            <span class="regular-price"> <span class="price">89.000 VNĐ</span> </span>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="item">
                                                <div class="col-item">
                                                    <div class="item-inner">
                                                        <div class="item-img">
                                                            <div class="item-img-info">
                                                                <a href="product_detail.html" title="Xi măng Hà Tiên 1" class="product-image"> <img src="~/Content/images/xi-mang-ha-tien-1-pcb-30.jpg"></a>

                                                            </div>
                                                        </div>
                                                        <div class="item-info">
                                                            <div class="info-inner">
                                                                <div class="item-title"> <a href="grid.html" title="Xi măng Hà Tiên 1"> Xi măng Hà Tiên 1 </a> </div>
                                                                <div class="item-content">
                                                                    <div class="rating">

                                                                    </div>
                                                                    <div class="item-price">
                                                                        <div class="price-box">
                                                                            <span class="regular-price"> <span class="price">89.000 VNĐ</span> </span>

                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </section>

        </div>
    </div>
    <br />

</section>

<div id="mua_ngay" class="modal fade" role="dialog">
    <div class="modal-dialog" style="left:0%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Title</h4>
            </div>
            <div class="modal-body">
                <div id="bodyinfo"></div>
            </div>
            <div class="modal-footer">
                <input type="button" value="Thêm vào giỏ hàng" class="btn btn-success" id="mua_ngay_btn" />
                <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
            </div>
        </div>

    </div>
</div>

<div id="maps" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg" style="left:0%">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Title</h4>
            </div>
            <div class="modal-body">
                <div id="mapsInfo">
                    
                </div>
            </div>
        </div>

    </div>
</div>


@*<script src="~/Scripts/js/jquery.min.js"></script>*@
<script src="~/Scripts/js/bootstrap.min.js"></script>
<script src="~/Scripts/js/parallax.js"></script>
<script src="~/Scripts/js/common.js"></script>
<script src="~/Scripts/js/slider.js"></script>
<script src="~/Scripts/js/owl.carousel.min.js"></script>
<script src="~/Scripts/handlebars.min.js"></script>
<script src="https://maps.google.com/maps/api/js?key=AIzaSyBO_d9y7dn40gSnQs0ZQRhClFpFDQKqzjM&region=VN"></script>

<script src="~/Scripts/jquery.storelocator.js"></script>

<script>
    $(document).ready(function () {
        $(".stars").each(function () {
           
            var val = parseFloat($(this).html());
            console.log(val);
          
            var size = Math.max(0, (Math.min(5, val))) * 16;
         
            var $span = $('<span />').width(size);
          
            $(this).html($span);
        });


        $("#recomendation").click(function (event) {

            $('#bh-sl-map-container').storeLocator({
                'mapSettings': {
                    zoom: 12,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    //disableDoubleClickZoom: true,
                    scrollwheel: false,
                    navigationControl: false,
                    draggable: true
                },
                'dataType': 'json',
                'dataLocation': '/Store/@Session["FilenameJson"]_.json',
                'lengthUnit': 'km',
                'autoGeocode': true,
                'originMarker': true,
                'originMarkerImg': '/Images/marker-home.png'
            });

            Handlebars.registerHelper("printPrice", function (price) {
                return addDot(price);
            });

            Handlebars.registerHelper("printStart", function (rating) {

                var val = parseFloat(rating);
                var size = Math.max(0, (Math.min(5, val))) * 16;

                var result = "<span style='width:" + size + "px;'/> ";

                return new Handlebars.SafeString(result);
            });
        });



    });


</script>


