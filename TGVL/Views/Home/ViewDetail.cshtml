@model TGVL.Models.SearchResultViewModel

@{
    ViewBag.Title = "ViewDetail";
    Layout = "~/Views/Shared/_HomePageViewLayout.cshtml";
}

@Styles.Render("~/Content/searchproductcss")
@*@Scripts.Render("~/bundles/viewdetailjquery")*@

<style>
    .item-img-info {
        width: 300px;
        height: 200px;
        background-image: none;
        background-repeat: no-repeat;
        background-position: center center;
        background-size: cover;
    }

    .item-inner {
        width: 300px;
        height: 300px;
        display: inline-block;
        padding: 5px;
        margin-left: 10px;
        vertical-align: top;
    }

    .col-item {
        width: 100%;
        height: auto;
        padding: 5px;
    }

    span.stars, span.stars span {
        display: block;
        background: url("/Images/stars.png") 0 -16px repeat-x;
        width: 80px;
        height: 16px;
    }

    span.stars span {
        background-position: 0 0;
    }
</style>

<section class="main-container">
    <div class="main container">
        <div class="breadcrumbs">
            <div class="container">
                <div class="row">
                    <ul>
                        <li class="home"><strong> Trang chủ </strong><span>&raquo;</span></li>
                        <li class=""> <strong>@Model.SysProduct.SysCategory.Name</strong><span>&raquo;</span></li>
                        <li class="category13"><strong> @Model.SysProduct.Name </strong></li>
                    </ul>
                </div>
            </div>
        </div>
        <br />
        <div class="col-main">
            <div class="row">
                <div class="col-md-12">
                    <div class="product-view">
                        <div class="product-essential">
                            <div class="product-img-box col-sm-4 col-xs-12">
                                <div class="product-image">
                                    <div>
                                        @*<div class="large-image"><img alt="product-image" src="~/Content/images/cement-fico-pcb-40.jpg"></div>*@
                                        <img src="~/Images/Product/SysProduct/@Model.SysProduct.Image" width="100" height="100" />
                                    </div>
                                </div>
                                <div class="clear"></div>
                            </div>
                            <div class="product-shop col-sm-8 col-xs-12">
                                <div class="product-name">
                                    <h1>@Model.SysProduct.Name</h1>
                                </div>
                              
                                <div class="short-description">                                   
                                    <table class="table col-md-4">
                                        <thead>
                                            <tr>THÔNG SỐ SẢN PHẨM</tr>
                                        </thead>
                                        @foreach (var item in Model.SysProduct.ProductAttributes)
                                        {                                
                                            <tr>
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.Attribute)
                                                </td>
                                                <td>
                                                    @Html.DisplayFor(modelItem => item.Value)
                                                </td>
                                            </tr>
                                        }
                                    </table>

              
                                    <div class="price-block col-md-6">
                                        <div class="price-box">
                                            Có <span class="total"> @Model.NumOfShops </span> cửa hàng bán với giá từ: <p class="special-price"> <span class="price-label"> Special Price</span> <span class="price">@Model.SysProduct.UnitPrice</span> </p>
                                            @*<button type="button" class="button btn-default" data-toggle="modal" data-target="#selectSupplier">
                                                Cửa hàng để xuất
                                            </button>*@
                                            <button id="recommend-btn" class="btn btn-primary" type="button">Cửa hàng để xuất</button>
                                        </div>
                                    </div>
                                </div>
                                <hr />
                                <br/>

                                
                                </div>
                                <hr />
                                <br />
                                <br /> 
                          
                           
                        </div>
                    </div>
                </div>
            </div>
            <div class="bh-sl-container container-fluid">
                <div class="jumbotron">
                    <div class="container">

                        <div class="bh-sl-form-container" style="display:none">
                            <form id="bh-sl-user-location" class="form-inline" method="post" action="#" role="form">
                                <div class="form-input form-group">
                                    <label for="bh-sl-address">Enter Address or Zip Code:</label>
                                    <input class="form-control" type="text" id="bh-sl-address" name="bh-sl-address" />
                                </div>

                                <button id="bh-sl-submit" class="btn btn-primary" type="submit">Submit</button>
                            </form>
                        </div>
                    </div>
                </div>

                <div id="bh-sl-map-container" class="bh-sl-map-container">
                    <div class="row">
                        <div id="map-results-container" class="container">
                            
                            <div class="bh-sl-loc-list col-md-3">
                                <ul class="list list-unstyled"></ul>
                            </div>
                            <div id="bh-sl-map" class="bh-sl-map col-md-9"></div>
                        </div>
                    </div>
                </div>
            </div>
            <br />
            

                </div>
            </div>
            <br />
            <div class="popular-posts widget widget__sidebar">
                <h3 class="widget-title">SẢN PHẨM TƯƠNG TỰ</h3>
                <div class="widget-content">


                </div>
            </div>
</section>

<div id="selectSupplier" class="modal fade" role="dialog">
    <div clas="modal-dialog modal-sm">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Danh sách cửa hàng</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal">
                    <div class="table-responsive">
                        <table class="data-table" id="my-orders-table">
                            <thead>
                                <tr>
                                    <th>Cửa hàng</th>
                                    <th>Giá</th>
                                    <th>Số lượng</th>
                                    <th>Chọn</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Cửa hàng VLXD Vy Vy</td>
                                    <td>80.000 VNĐ</td>
                                    <td>
                                        <input id="Quantity" name="Quantity" type="number" />
                                    </td>
                                    <td>
                                        <input type="checkbox" name="" value="" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Cửa hàng VLXD Vy Vy</td>
                                    <td>80.000 VNĐ</td>
                                    <td>
                                        <input id="Quantity" name="Quantity" type="number" />
                                    </td>
                                    <td>
                                        <input type="checkbox" name="" value="" />
                                    </td>
                                </tr>
                                <tr>
                                    <td>Cửa hàng VLXD Vy Vy</td>
                                    <td>80.000 VNĐ</td>
                                    <td>
                                        <input id="Quantity" name="Quantity" type="number" />
                                    </td>
                                    <td>
                                        <input type="checkbox" name="" value="" />
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

                <button type="button" class="btn btn-warning" data-dismiss="modal">Thêm vào giỏ hàng</button>
                <button type="button" class="btn btn-default" data-dismiss="modal">Đóng</button>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/Scripts/handlebars.min.js"></script>
    <script src="https://maps.google.com/maps/api/js?key=AIzaSyBO_d9y7dn40gSnQs0ZQRhClFpFDQKqzjM&region=VN"></script>

    <script src="~/Scripts/jquery.storelocator.js"></script>

    <script>
        $(document).ready(function () {
            
            $("#recommend-btn").click(function (event) {
                console.log("abc");

                $('#bh-sl-map-container').storeLocator({
                    'mapSettings': {
                        zoom: 12,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        //disableDoubleClickZoom: true,
                        scrollwheel: false,
                        navigationControl: false,
                        draggable: true
                    },
                    'dataType': 'json',
                    'dataLocation': '/Store/@Session["FilenameJson"]_.json',
                    'lengthUnit': 'km',
                    'autoGeocode': true,
                    'originMarker' : true,
                    'originMarkerImg': '/Images/marker-home.png'
                });

                Handlebars.registerHelper("printPrice", function (price) {
                    return addDot(price);
                });

                Handlebars.registerHelper("printStart", function (rating) {

                    var val = parseFloat(rating);
                    var size = Math.max(0, (Math.min(5, val))) * 16;

                    var result = "<span style='width:" + size + "px;'/> ";

                    return new Handlebars.SafeString(result);
                });
            });
            

            
        });

        
    </script>

}
